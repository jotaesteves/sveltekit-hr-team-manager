import{O as m,k as i,x as _,h as s,w as h}from"./utils.C04XHTxJ.js";import{l as d}from"./disclose-version.CzPu-Rt_.js";import{i as k}from"./props.xpo5v5g-.js";function g(e,r,l=r){var u=m();d(e,"input",a=>{var v=a?e.defaultValue:e.value;if(v=t(e)?c(v):v,l(v),u&&v!==(v=r())){var n=e.selectionStart,f=e.selectionEnd;e.value=v??"",f!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(f,e.value.length))}}),(s&&e.defaultValue!==e.value||i(r)==null&&e.value)&&l(t(e)?c(e.value):e.value),_(()=>{var a=r();t(e)&&a===c(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function w(e,r,l=r){d(e,"change",u=>{var a=u?e.defaultChecked:e.checked;l(a)}),(s&&e.defaultChecked!==e.checked||i(r)==null)&&l(e.checked),_(()=>{var u=r();e.checked=!!u})}function t(e){var r=e.type;return r==="number"||r==="range"}function c(e){return e===""?null:+e}function b(e,r,l){if(e.multiple)return S(e,r);for(var u of e.options){var a=o(u);if(k(a,r)){u.selected=!0;return}}(!l||r!==void 0)&&(e.selectedIndex=-1)}function y(e,r){h(()=>{var l=new MutationObserver(()=>{var u=e.__value;b(e,u)});return l.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function C(e,r,l=r){var u=!0;d(e,"change",a=>{var v=a?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(v),o);else{var f=e.querySelector(v)??e.querySelector("option:not([disabled])");n=f&&o(f)}l(n)}),h(()=>{var a=r();if(b(e,a,u),u&&a===void 0){var v=e.querySelector(":checked");v!==null&&(a=o(v),l(a))}e.__value=a,u=!1}),y(e)}function S(e,r){for(var l of e.options)l.selected=~r.indexOf(o(l))}function o(e){return"__value"in e?e.__value:e.value}export{w as a,C as b,g as c};
