import{o as f,q as a,v as p}from"./utils.C04XHTxJ.js";const o=[];function _(s,i=f){let e=null;const r=new Set;function u(n){if(p(s,n)&&(s=n,e)){const c=!o.length;for(const t of r)t[1](),o.push(t,s);if(c){for(let t=0;t<o.length;t+=2)o[t][0](o[t+1]);o.length=0}}}function b(n){u(n(s))}function l(n,c=f){const t=[n,c];return r.add(t),r.size===1&&(e=i(u,b)||f),n(s),()=>{r.delete(t),r.size===0&&e&&(e(),e=null)}}return{set:u,update:b,subscribe:l}}function d(s){let i;return a(s,e=>i=e)(),i}export{d as g,_ as w};
