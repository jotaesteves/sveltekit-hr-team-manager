import{e as G,a as b,t as D,s as _,c as bt}from"../chunks/disclose-version.CzPu-Rt_.js";import{i as dt}from"../chunks/legacy.B-5iXLmI.js";import{p as vt,l as X,a as ct,c as a,r as t,s as o,t as h,b as mt,d as I,ay as W,g as e,m as O,a9 as Ve,aA as Pe,f as lt,aB as _t}from"../chunks/utils.C04XHTxJ.js";import{i as Z}from"../chunks/if.BF8G6Okk.js";import{e as he,s as je,i as ke,r as Re,a as wt}from"../chunks/attributes.B2I8jlZM.js";import{t as Ue,s as Je}from"../chunks/class.DTTMifpR.js";import{b as yt,a as it}from"../chunks/select.DBO4yahN.js";import{s as Qt,a as ot}from"../chunks/store.CPWwUTyK.js";import{c as St,o as At}from"../chunks/index-client.DEL_DgFo.js";import{a as Fe,p as Rt,c as jt}from"../chunks/dataStore.uhksSemp.js";import{p as y}from"../chunks/props.xpo5v5g-.js";var qt=D('<button class="rating-chip svelte-1vzxt2s"><span class="chip-label svelte-1vzxt2s"> </span> <span class="chip-score svelte-1vzxt2s"> </span></button>'),Ht=D('<div class="drop-zone-target svelte-1vzxt2s"></div>'),Wt=D('<div class="donut-chart svelte-1vzxt2s"><span class="member-count svelte-1vzxt2s"> </span></div>'),Bt=D('<div class="donut-wrapper svelte-1vzxt2s"><!></div>'),Ut=D('<td role="gridcell" tabindex="0"><span><span class="text-white svelte-1vzxt2s"> </span> <span class="role-icon text-white svelte-1vzxt2s"> </span></span> <!></td>');function Ft(Ne,u){vt(u,!1);const A=O(),R=O(),U=St();let j=y(u,"potentialIndex",8,0),x=y(u,"performanceIndex",8,0),P=y(u,"reviewScale",8,4),L=y(u,"isDraggable",8,!1),C=y(u,"isEditable",8,!1),xe=y(u,"equalMembership",8,""),q=y(u,"showNames",8,!0),Y=y(u,"memberships",24,()=>[]),F=y(u,"reviewSettings",24,()=>({})),oe=y(u,"startDrag",8,()=>{}),te=y(u,"selectMembership",8,()=>{}),be=y(u,"deselectMembership",8,()=>{}),Le=y(u,"evaluateCriteriaScores",8,()=>{});const _e={1:{id:1,name:"Low Performer",icon:"📉"},2:{id:2,name:"Core Performer",icon:"📊"},3:{id:3,name:"Solid Performer",icon:"📈"},4:{id:4,name:"High Performer",icon:"⭐"},5:{id:5,name:"Top Performer",icon:"🌟"}};let ae=O(!1);function Te(n){var g,w,c,d,M,z,E,B;return n===0||!n?`${((w=(g=F().dimensions)==null?void 0:g[3])==null?void 0:w.name)||"Dimension"} is not assessed`:`${((d=(c=F().dimensions)==null?void 0:c[3])==null?void 0:d.name)||"Dimension"} is ${((B=(E=(z=(M=F().scales)==null?void 0:M[P()])==null?void 0:z[3])==null?void 0:E[n])==null?void 0:B.name)||"unknown"}`}function ze(n){n.preventDefault(),I(ae,!1),U("drop",{event:n,d1:x(),d2:j()})}function de(n){n.preventDefault(),I(ae,!0),U("dragenter",n)}function re(n){n.preventDefault(),U("dragover",n)}function se(n){n.preventDefault();const g=n.currentTarget,w=n.relatedTarget;g.contains(w)||I(ae,!1)}function ve(n){C()&&Le()()}function Oe(n){te()(null,n.id)}function ne(){be()()}function $(n,g){(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),ve())}function ce(n){te()(null,n.id)}function le(){be()()}X(()=>(W(x()),W(j()),W(P()),W(F())),()=>{I(A,(()=>{var M,z;const n=[x(),j()].toString(),g={3:[["1,1"],["1,3"],["3,1"],["1,2","2,3","2,2","3,2","2,1"],["3,3"]],4:[["1,1","2,1","1,2"],["1,3","1,4","2,4"],["4,2","3,1","4,1"],["2,3","3,3","2,2","3,2"],["3,4","4,4","4,3"]],5:[["2,1","1,1","1,2","1,3","2,2"],["1,4","1,5","2,5","3,5","2,4"],["5,2","5,1","4,1","3,1","4,2"],["3,4","2,3","3,3","4,3","3,2"],["4,5","5,5","5,4","5,3","4,4"]]};let w=0;(g[P()]||g[4]).some((E,B)=>{if(E.includes(n))return w=B,!0});const d=_e[w+1]||_e[1];return{...d,name:((z=(M=F().roles)==null?void 0:M[w])==null?void 0:z.name)||d.name}})())}),X(()=>(W(Y()),W(x()),W(j())),()=>{I(R,Y().filter(n=>{var g,w,c,d;return((w=(g=n.score)==null?void 0:g.values)==null?void 0:w[1])===x()&&((d=(c=n.score)==null?void 0:c.values)==null?void 0:d[2])===j()}))}),ct(),dt();var T=Ut(),ie=a(T),s=a(ie),r=a(s,!0);t(s);var v=o(s,2),S=a(v,!0);t(v),t(ie);var k=o(ie,2);{var V=n=>{var g=Ht();he(g,5,()=>e(R),w=>w.id,(w,c)=>{var d=qt();h(()=>{var Q,me;return je(d,"title",Te((me=(Q=e(c).score)==null?void 0:Q.values)==null?void 0:me[3]))});var M=a(d),z=a(M,!0);h(()=>{var Q;return _(z,e(c).firstName||((Q=e(c).name)==null?void 0:Q.split(" ")[0])||"Unknown")}),t(M);var E=o(M,2),B=a(E,!0);t(E),t(d),h(()=>{var Q,me;je(d,"draggable",L()),Ue(d,"draggable",L()),Ue(d,"focused",xe()===e(c).id),_(B,((me=(Q=e(c).score)==null?void 0:Q.values)==null?void 0:me[3])||0)}),G("dragstart",d,Q=>oe()(Q,e(c))),G("click",d,()=>ve(e(c))),G("keydown",d,Q=>$(Q,e(c))),G("mouseover",d,()=>Oe(e(c))),G("mouseleave",d,ne),G("focus",d,()=>ce(e(c))),G("blur",d,le),b(w,d)}),t(g),b(n,g)},H=n=>{var g=Bt(),w=a(g);{var c=d=>{var M=Wt(),z=a(M),E=a(z,!0);t(z),t(M),h(()=>_(E,e(R).length)),b(d,M)};Z(w,d=>{e(R).length&&d(c)})}t(g),b(n,g)};Z(k,n=>{q()?n(V):n(H,!1)})}t(T),h(()=>{Je(T,`grid-cell text-role-${e(A).id??""}-light svelte-1vzxt2s`),Ue(T,"donut-cell",!q()&&e(R).length),Ue(T,"drag-over",e(ae)),Je(ie,`role-name text-role-${e(A).id??""}-dark svelte-1vzxt2s`),_(r,e(A).name),_(S,e(A).icon)}),G("drop",T,ze),G("dragenter",T,de),G("dragover",T,re),G("dragleave",T,se),b(Ne,T),mt()}var Vt=D('<th class="scalelabel svelte-gxtsth"><span class="rotate svelte-gxtsth"> </span></th>'),Jt=D('<tr><!><th class="scalelabel svelte-gxtsth"><span class="rotate svelte-gxtsth"> </span></th><!></tr>'),Kt=D('<thead><tr><th class="scalelabel svelte-gxtsth"></th><th class="scalelabel svelte-gxtsth"></th><th class="svelte-gxtsth"> </th></tr></thead>'),Zt=D('<th class="svelte-gxtsth"> </th>'),Xt=D('<table><tbody></tbody><!><tfoot><tr class="svelte-gxtsth"><td colspan="2" class="svelte-gxtsth"></td><!></tr><tr><th colspan="2" class="svelte-gxtsth"></th><th class="svelte-gxtsth"> </th></tr></tfoot></table>');function Yt(Ne,u){vt(u,!1);const A=O(),R=O(),U=O(),j=St();let x=y(u,"reviewSettings",24,()=>({})),P=y(u,"review",24,()=>({})),L=y(u,"reviewScale",8,4),C=y(u,"memberships",24,()=>[]),xe=y(u,"isDraggable",8,!1),q=y(u,"isEditable",8,!1),Y=y(u,"equalMembership",8,""),F=y(u,"showNames",8,!0),oe=y(u,"hideTitle",8,!1);function te(s,r){s.dataTransfer&&(s.dataTransfer.dropEffect="move",s.dataTransfer.effectAllowed="move",s.dataTransfer.setData("membership",JSON.stringify(r)),s.dataTransfer.setData("membershipId",String(r.membershipId||r.id)),console.log("Starting drag for member:",r.firstName||r.name))}function be(s,r,v){s.preventDefault();try{if(!s.dataTransfer)return;const S=s.dataTransfer.getData("membership"),k=s.dataTransfer.getData("membershipId");if(!S&&!k){console.error("No membership data found in drag event");return}let V;if(S?V=JSON.parse(S):V=C().find(H=>H.id.toString()===k||H.membershipId.toString()===k),!V){console.error("Could not find membership for ID:",k);return}j("drop-member",{membership:V,d1:r,d2:v})}catch(S){console.error("Error parsing dropped data:",S)}}function Le(){j("open-membership-evaluation-dialog")}function _e(s,r){j("selectMembership",{event:s,membership:r})}function ae(){j("deselectMembership")}function Te(s){return s?new Date(s).toLocaleString():""}function ze(s){var r,v;(v=(r=s.detail)==null?void 0:r.preventDefault)==null||v.call(r)}function de(s){var r,v;(v=(r=s.detail)==null?void 0:r.preventDefault)==null||v.call(r)}X(()=>(W(x()),W(L())),()=>{var s,r,v;I(A,((v=(r=(s=x())==null?void 0:s.scales)==null?void 0:r[L()])==null?void 0:v[1])||{1:{name:"Level 1"},2:{name:"Level 2"},3:{name:"Level 3"},4:{name:"Level 4"}})}),X(()=>(W(x()),W(L())),()=>{var s,r,v;I(R,((v=(r=(s=x())==null?void 0:s.scales)==null?void 0:r[L()])==null?void 0:v[1])||{1:{name:"Level 1"},2:{name:"Level 2"},3:{name:"Level 3"},4:{name:"Level 4"}})}),X(()=>(W(x()),W(L())),()=>{var s,r,v;I(U,((v=(r=(s=x())==null?void 0:s.scales)==null?void 0:r[L()])==null?void 0:v[2])||{1:{name:"Level 1"},2:{name:"Level 2"},3:{name:"Level 3"},4:{name:"Level 4"}})}),ct(),dt();var re=Xt(),se=a(re);he(se,5,()=>Object.keys(e(U)).reverse(),ke,(s,r,v)=>{var S=Jt(),k=a(S);{var V=c=>{var d=Vt();h(()=>je(d,"rowspan",Object.keys(e(U)).length));var M=a(d),z=a(M,!0);t(M),t(d),h(()=>{var E,B;return _(z,((B=(E=x().dimensions)==null?void 0:E[2])==null?void 0:B.name)||"Potential")}),b(c,d)};Z(k,c=>{v===0&&c(V)})}var H=o(k),n=a(H),g=a(n,!0);h(()=>{var c;return _(g,((c=e(U)[parseInt(e(r))])==null?void 0:c.name)||`Level ${e(r)}`)}),t(n),t(H);var w=o(H);he(w,1,()=>Object.keys(e(A)),ke,(c,d)=>{var M=Ve(()=>parseInt(e(r))),z=Ve(()=>parseInt(e(d)));Ft(c,{get potentialIndex(){return e(M)},get performanceIndex(){return e(z)},get showNames(){return F()},get isDraggable(){return xe()},get isEditable(){return q()},get reviewScale(){return L()},evaluateCriteriaScores:Le,selectMembership:_e,deselectMembership:ae,get memberships(){return C()},get reviewSettings(){return x()},startDrag:te,get equalMembership(){return Y()},$$events:{drop:E=>be(E.detail.event,E.detail.d1,E.detail.d2),dragenter:ze,dragover:de}})}),t(S),b(s,S)}),t(se);var ve=o(se);{var Oe=s=>{var r=Kt(),v=a(r),S=o(a(v),2);h(()=>je(S,"colspan",Object.keys(e(A)).length));var k=a(S);h(()=>_(k,`${Te(P().createdAt||new Date)??""} | ${(P().reviewerName||"Unknown")??""} |
					${(P().name||"Review")??""} | ${(P().reviewName||"Performance Review")??""}
					${(P().type||"")??""}`)),t(S),t(v),t(r),b(s,r)};Z(ve,s=>{oe()||s(Oe)})}var ne=o(ve),$=a(ne),ce=o(a($));he(ce,1,()=>Object.keys(e(R)),ke,(s,r)=>{var v=Zt(),S=a(v,!0);h(()=>{var k;return _(S,((k=e(R)[parseInt(e(r))])==null?void 0:k.name)||`Level ${e(r)}`)}),t(v),b(s,v)}),t($);var le=o($),T=o(a(le));h(()=>je(T,"colspan",Object.keys(e(R)).length));var ie=a(T,!0);t(T),t(le),t(ne),t(re),h(()=>{var s,r;Je(re,`dimensions-table dimensions-table_scale${L()??""} svelte-gxtsth`),_(ie,((r=(s=x().dimensions)==null?void 0:s[1])==null?void 0:r.name)||"Performance")}),b(Ne,re),mt()}var $t=D('<label class="flex items-center"><input type="checkbox" class="mr-2"> Show Names</label> <label class="flex items-center"><input type="checkbox" class="mr-2"> Enable Drag & Drop</label>',1),ea=D('<div class="overflow-hidden rounded-lg bg-white shadow-md"><div class="p-6"><h2 class="mb-4 text-xl font-semibold">Performance vs Potential Matrix</h2> <div class="overflow-x-auto"><!></div></div></div>'),ta=D('<div class="text-xs text-gray-500"> </div>'),aa=D('<th class="min-w-32 px-4 py-3 text-center font-medium text-gray-900"><div> </div> <!></th>'),ra=D('<input type="number" min="1" max="5" class="w-16 rounded border px-2 py-1 text-center">'),sa=D('<div class="flex flex-col items-center"><div> </div> <div class="mt-1 text-xs"> </div></div>'),na=D('<div class="text-center"><div class="text-lg font-bold"> </div> <input type="text" placeholder="Notes..." class="mt-1 w-24 rounded border px-1 py-1 text-xs"></div>'),la=D('<td class="px-4 py-3 text-center"><!></td>'),ia=D('<tr class="hover:bg-gray-50"><td class="sticky left-0 z-10 border-r bg-white px-4 py-3"><div class="font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div></td><!><td class="px-4 py-3 text-center"><div class="text-lg font-bold text-blue-600"> </div> <div class="text-xs text-gray-500"> </div></td></tr>'),oa=D('<div class="overflow-hidden rounded-lg bg-white shadow-md"><div class="overflow-x-auto"><table class="w-full"><thead class="bg-gray-50"><tr><th class="sticky left-0 z-10 bg-gray-50 px-4 py-3 text-left font-medium text-gray-900">Employee</th><!><th class="px-4 py-3 text-center font-medium text-gray-900">Weighted Score</th></tr></thead><tbody class="divide-y divide-gray-200"></tbody></table></div></div>'),da=D('<div class="space-y-6"><div class="rounded-lg bg-white p-6 shadow-md"><div class="flex flex-col items-start justify-between gap-4 md:flex-row md:items-center"><div><h1 class="text-2xl font-bold text-gray-800">Performance Evaluation Grid</h1> <p class="text-gray-600"> </p></div> <div class="flex flex-wrap gap-2"><select class="rounded-md border px-3 py-2"><option>Score View</option><option>Heatmap View</option><option>Detailed View</option><option>Performance Matrix</option></select> <select class="rounded-md border px-3 py-2"><option>2024 Q1</option><option>2023 Q4</option><option>2023 Q3</option></select> <button class="rounded bg-green-500 px-4 py-2 text-white hover:bg-green-600">Export</button> <label class="cursor-pointer rounded bg-blue-500 px-4 py-2 text-white hover:bg-blue-600">Import <input type="file" accept=".csv,.xlsx" class="hidden"></label></div></div> <div class="mt-4 flex gap-4"><label class="flex items-center"><input type="checkbox" class="mr-2"> Show Criteria Weights</label> <!></div></div> <div class="grid grid-cols-1 gap-4 md:grid-cols-4"><div class="rounded-lg bg-blue-50 p-4"><h3 class="text-lg font-medium text-blue-800">Total Employees</h3> <p class="text-2xl font-bold text-blue-600"> </p></div> <div class="rounded-lg bg-green-50 p-4"><h3 class="text-lg font-medium text-green-800">Evaluation Criteria</h3> <p class="text-2xl font-bold text-green-600"> </p></div> <div class="rounded-lg bg-purple-50 p-4"><h3 class="text-lg font-medium text-purple-800">Evaluations</h3> <p class="text-2xl font-bold text-purple-600"> </p></div> <div class="rounded-lg bg-orange-50 p-4"><h3 class="text-lg font-medium text-orange-800">Completion Rate</h3> <p class="text-2xl font-bold text-orange-600">100%</p></div></div> <!> <div class="rounded-lg bg-white p-6 shadow-md"><h3 class="mb-4 text-lg font-semibold">Scoring Legend</h3> <div class="grid grid-cols-1 gap-4 md:grid-cols-5"><div class="flex items-center"><div class="mr-2 h-4 w-4 rounded bg-green-500"></div> <span class="text-sm">5 - Excellent</span></div> <div class="flex items-center"><div class="mr-2 h-4 w-4 rounded bg-blue-500"></div> <span class="text-sm">4 - Good</span></div> <div class="flex items-center"><div class="mr-2 h-4 w-4 rounded bg-yellow-500"></div> <span class="text-sm">3 - Average</span></div> <div class="flex items-center"><div class="mr-2 h-4 w-4 rounded bg-orange-500"></div> <span class="text-sm">2 - Below Average</span></div> <div class="flex items-center"><div class="mr-2 h-4 w-4 rounded bg-red-500"></div> <span class="text-sm">1 - Poor</span></div></div></div></div>');function wa(Ne,u){vt(u,!1);const A=Qt(),R=()=>ot(Rt,"$peopleStore",A),U=()=>ot(jt,"$criteriaStore",A),j=()=>ot(Fe,"$performanceGridStore",A),x=O(),P=O(),L=O(),C=O(),xe=O();let q=O("scores"),Y=O("2024 Q1"),F=O(!0),oe=O(!0),te=O(!0),be=!0;const Le={scales:{4:{1:{1:{name:"Poor"},2:{name:"Below Average"},3:{name:"Good"},4:{name:"Excellent"}},2:{1:{name:"Low"},2:{name:"Medium"},3:{name:"High"},4:{name:"Very High"}}}},dimensions:{1:{name:"Performance"},2:{name:"Potential"},3:{name:"Employability"}},roles:[{name:"Under Performer"},{name:"Core Performer"},{name:"Solid Performer"},{name:"High Performer"},{name:"Top Performer"}]},_e={createdAt:new Date().toISOString(),reviewerName:"HR Manager",name:"Performance Review",reviewName:"Q1 2024 Review",type:"Quarterly"};At(()=>{Fe.initializeGrid(e(x),e(P))});function ae(i,l,p){Fe.updateScore(i,l,p)}function Te(i,l,p){var m;const f=(m=e(L)[i])==null?void 0:m[l];f&&Fe.updateScore(i,l,f.score,p)}function ze(i){const{membership:l,d1:p,d2:f}=i.detail;if(!l||!l.id){console.error("Invalid membership data in drop event");return}const m=e(C).findIndex(ue=>ue.id===l.id);if(m===-1){console.error("Member not found:",l.id);return}const N={...e(C)[m],score:{...e(C)[m].score,values:{...e(C)[m].score.values,1:p,2:f}}};I(C,[...e(C).slice(0,m),N,...e(C).slice(m+1)]),console.log(`Updated ${l.firstName||l.name}'s scores:`,{performance:p,potential:f,employability:N.score.values[3]})}function de(i){let l=0,p=0;return(e(P)||[]).forEach(f=>{var N;const m=(N=e(L)[i])==null?void 0:N[f.id];m!=null&&m.score&&(l+=m.score*(f.weight/100),p+=f.weight/100)}),p>0?(l/p).toFixed(1):"0"}function re(i){const l=typeof i=="string"?parseFloat(i):i;return l>=4.5?"bg-green-500":l>=3.5?"bg-blue-500":l>=2.5?"bg-yellow-500":l>=1.5?"bg-orange-500":"bg-red-500"}function se(i){const l=typeof i=="string"?parseFloat(i):i;return l>=4.5?"Excellent":l>=3.5?"Good":l>=2.5?"Average":l>=1.5?"Below Average":"Poor"}function ve(){const i=(e(x)||[]).map(l=>{const p={Employee:l.name,Role:l.role,Department:l.department,"Weighted Score":de(Number(l.id))};return(e(P)||[]).forEach(f=>{var N;const m=(N=e(L)[l.id])==null?void 0:N[f.id];p[f.name]=(m==null?void 0:m.score)||0,p[`${f.name} Notes`]=(m==null?void 0:m.notes)||""}),p});console.log("Export data:",i),alert("Grid data exported (check console for data)")}function Oe(i){var f;const p=(f=i.target.files)==null?void 0:f[0];p&&alert(`Import functionality would process: ${p.name}`)}X(()=>R(),()=>{I(x,R())}),X(()=>U(),()=>{I(P,U())}),X(()=>j(),()=>{I(L,j())}),X(()=>e(x),()=>{I(C,(e(x)||[]).map((i,l)=>({id:i.id,membershipId:i.id,firstName:(i.name||"").split(" ")[0],name:i.name||"Unknown",score:{values:{1:Math.floor(Math.random()*4)+1,2:Math.floor(Math.random()*4)+1,3:Math.floor(Math.random()*4)+1}}})))}),X(()=>e(C),()=>{I(xe,e(C))}),ct(),dt();var ne=da(),$=a(ne),ce=a($),le=a(ce),T=o(a(le),2),ie=a(T);t(T),t(le);var s=o(le,2),r=a(s);h(()=>{e(q),_t(()=>{})});var v=a(r);v.value=(v.__value="scores")==null?"":"scores";var S=o(v);S.value=(S.__value="heatmap")==null?"":"heatmap";var k=o(S);k.value=(k.__value="detailed")==null?"":"detailed";var V=o(k);V.value=(V.__value="matrix")==null?"":"matrix",t(r);var H=o(r,2);h(()=>{e(Y),_t(()=>{})});var n=a(H);n.value=(n.__value="2024 Q1")==null?"":"2024 Q1";var g=o(n);g.value=(g.__value="2023 Q4")==null?"":"2023 Q4";var w=o(g);w.value=(w.__value="2023 Q3")==null?"":"2023 Q3",t(H);var c=o(H,2),d=o(c,2),M=o(a(d));t(d),t(s),t(ce);var z=o(ce,2),E=a(z),B=a(E);Re(B),Pe(),t(E);var Q=o(E,2);{var me=i=>{var l=$t(),p=lt(l),f=a(p);Re(f),Pe(),t(p);var m=o(p,2),N=a(m);Re(N),Pe(),t(m),it(f,()=>e(oe),ue=>I(oe,ue)),it(N,()=>e(te),ue=>I(te,ue)),b(i,l)};Z(Q,i=>{e(q)==="matrix"&&i(me)})}t(z),t($);var Ke=o($,2),Ze=a(Ke),ut=o(a(Ze),2),Dt=a(ut,!0);t(ut),t(Ze);var Xe=o(Ze,2),pt=o(a(Xe),2),Mt=a(pt,!0);t(pt),t(Xe);var gt=o(Xe,2),ft=o(a(gt),2),Et=a(ft,!0);t(ft),t(gt),Pe(2),t(Ke);var It=o(Ke,2);{var Pt=i=>{var l=ea(),p=a(l),f=o(a(p),2),m=a(f);Yt(m,{reviewSettings:Le,review:_e,reviewScale:4,get memberships(){return e(xe)},get isDraggable(){return e(te)},isEditable:be,get showNames(){return e(oe)},hideTitle:!1,$$events:{"drop-member":ze,"selected-member":N=>console.log("Member selected:",N.detail),"open-membership-evaluation-dialog":N=>console.log("Open evaluation:",N.detail)}}),t(f),t(p),t(l),b(i,l)},kt=i=>{var l=oa(),p=a(l),f=a(p),m=a(f),N=a(m),ue=o(a(N));he(ue,1,()=>e(P),ke,(Ye,J)=>{var pe=aa(),ge=a(pe),Ce=a(ge,!0);t(ge);var $e=o(ge,2);{var qe=Ge=>{var we=ta(),He=a(we);t(we),h(()=>_(He,`(${e(J).weight??""}%)`)),b(Ge,we)};Z($e,Ge=>{e(F)&&Ge(qe)})}t(pe),h(()=>_(Ce,e(J).name)),b(Ye,pe)}),Pe(),t(N),t(m);var ht=o(m);he(ht,5,()=>e(x),ke,(Ye,J)=>{var pe=ia(),ge=a(pe),Ce=a(ge),$e=a(Ce,!0);t(Ce);var qe=o(Ce,2),Ge=a(qe);t(qe),t(ge);var we=o(ge);he(we,1,()=>e(P),ke,(Tt,tt)=>{var at=la();const ye=Ve(()=>{var ee;return(ee=e(L)[e(J).id])==null?void 0:ee[e(tt).id]});var zt=a(at);{var Ot=ee=>{var fe=ra();Re(fe),h(()=>{var Se;return wt(fe,((Se=e(ye))==null?void 0:Se.score)||0)}),G("change",fe,Se=>{const rt=Se.target;ae(e(J).id,e(tt).id,parseInt(rt.value))}),b(ee,fe)},Ct=ee=>{var fe=bt(),Se=lt(fe);{var rt=De=>{var Me=sa(),Ee=a(Me);const st=Ve(()=>{var K;return`h-8 w-8 rounded ${re(((K=e(ye))==null?void 0:K.score)||0)??""} flex items-center justify-center text-sm font-bold text-white`});var Qe=a(Ee,!0);t(Ee);var Ie=o(Ee,2),Ae=a(Ie,!0);h(()=>{var K;return _(Ae,se(((K=e(ye))==null?void 0:K.score)||0))}),t(Ie),t(Me),h(()=>{var K;Je(Ee,e(st)),_(Qe,((K=e(ye))==null?void 0:K.score)||0)}),b(De,Me)},Gt=De=>{var Me=bt(),Ee=lt(Me);{var st=Qe=>{var Ie=na(),Ae=a(Ie),K=a(Ae,!0);t(Ae);var nt=o(Ae,2);Re(nt),t(Ie),h(()=>{var We,Be;_(K,((We=e(ye))==null?void 0:We.score)||0),wt(nt,((Be=e(ye))==null?void 0:Be.notes)||"")}),G("change",nt,We=>{const Be=We.target;Te(e(J).id,e(tt).id,Be.value)}),b(Qe,Ie)};Z(Ee,Qe=>{e(q)==="detailed"&&Qe(st)},!0)}b(De,Me)};Z(Se,De=>{e(q)==="heatmap"?De(rt):De(Gt,!1)},!0)}b(ee,fe)};Z(zt,ee=>{e(q)==="scores"?ee(Ot):ee(Ct,!1)})}t(at),b(Tt,at)});var He=o(we),et=a(He),Nt=a(et,!0);h(()=>_(Nt,de(Number(e(J).id)))),t(et);var xt=o(et,2),Lt=a(xt,!0);h(()=>_(Lt,se(de(Number(e(J).id))))),t(xt),t(He),t(pe),h(()=>{_($e,e(J).name),_(Ge,`${e(J).role??""} • ${e(J).department??""}`)}),b(Ye,pe)}),t(ht),t(f),t(p),t(l),b(i,l)};Z(It,i=>{e(q)==="matrix"?i(Pt):i(kt,!1)})}Pe(2),t(ne),h(()=>{_(ie,`Comprehensive performance matrix for ${e(Y)??""}`),_(Dt,e(x).length),_(Mt,e(P).length),_(Et,e(x).length*e(P).length)}),yt(r,()=>e(q),i=>I(q,i)),yt(H,()=>e(Y),i=>I(Y,i)),G("click",c,ve),G("change",M,Oe),it(B,()=>e(F),i=>I(F,i)),b(Ne,ne),mt()}export{wa as component};
